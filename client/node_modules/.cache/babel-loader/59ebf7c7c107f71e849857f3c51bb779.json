{"ast":null,"code":"import _objectSpread from\"/Users/omarragab/Documents/test/launchFeb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect}from\"react\";import{useQuery}from\"@apollo/client\";import getCurrentUser from\"../GQL/queries/CurrentUser\";import LoginPage from\"../_pages/LoginPage/LoginPage\";// import history from \"./history\";\nimport{Link,useLocation}from\"react-router-dom\";import LoadingPage from\"../_pages/LoadingPage/LoadingPage\";import{jsx as _jsx}from\"react/jsx-runtime\";var RequireAuth=function RequireAuth(WrappedComponent){var CheckAuth=function CheckAuth(props){var _useLocation=useLocation(),pathname=_useLocation.pathname;var _useQuery=useQuery(getCurrentUser),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data;useEffect(function(){if(!loading&&!data.user2){props.history.push(\"/login\");}},[data]);if(data===null||data===void 0?void 0:data.user2){// props.history.push(pathname.p);\nreturn/*#__PURE__*/_jsx(WrappedComponent,_objectSpread({},props));}else{// props.history.push(\"/login\");\nreturn/*#__PURE__*/_jsx(LoadingPage,{});}};return CheckAuth;};export default RequireAuth;","map":{"version":3,"sources":["/Users/omarragab/Documents/test/launchFeb/client/src/utils/requireAuth.js"],"names":["React","useEffect","useQuery","getCurrentUser","LoginPage","Link","useLocation","LoadingPage","RequireAuth","WrappedComponent","CheckAuth","props","pathname","loading","error","data","user2","history","push"],"mappings":"sKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,cAAP,KAA2B,4BAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,CACA;AACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,MAAOC,CAAAA,WAAP,KAAwB,mCAAxB,C,2CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,gBAAD,CAAsB,CACxC,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CAC3B,iBAAqBL,WAAW,EAAhC,CAAQM,QAAR,cAAQA,QAAR,CACA,cAAiCV,QAAQ,CAACC,cAAD,CAAzC,CAAQU,OAAR,WAAQA,OAAR,CAAiBC,KAAjB,WAAiBA,KAAjB,CAAwBC,IAAxB,WAAwBA,IAAxB,CAEAd,SAAS,CAAC,UAAM,CACd,GAAI,CAACY,OAAD,EAAY,CAACE,IAAI,CAACC,KAAtB,CAA6B,CAC3BL,KAAK,CAACM,OAAN,CAAcC,IAAd,CAAmB,QAAnB,EACD,CACF,CAJQ,CAIN,CAACH,IAAD,CAJM,CAAT,CAMA,GAAIA,IAAJ,SAAIA,IAAJ,iBAAIA,IAAI,CAAEC,KAAV,CAAiB,CACf;AACA,mBAAO,KAAC,gBAAD,kBAAsBL,KAAtB,EAAP,CACD,CAHD,IAGO,CACL;AACA,mBAAO,KAAC,WAAD,IAAP,CACD,CACF,CAjBD,CAkBA,MAAOD,CAAAA,SAAP,CACD,CApBD,CAsBA,cAAeF,CAAAA,WAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport getCurrentUser from \"../GQL/queries/CurrentUser\";\nimport LoginPage from \"../_pages/LoginPage/LoginPage\";\n// import history from \"./history\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport LoadingPage from \"../_pages/LoadingPage/LoadingPage\";\n\nconst RequireAuth = (WrappedComponent) => {\n  const CheckAuth = (props) => {\n    const { pathname } = useLocation();\n    const { loading, error, data } = useQuery(getCurrentUser);\n\n    useEffect(() => {\n      if (!loading && !data.user2) {\n        props.history.push(\"/login\");\n      }\n    }, [data]);\n\n    if (data?.user2) {\n      // props.history.push(pathname.p);\n      return <WrappedComponent {...props} />;\n    } else {\n      // props.history.push(\"/login\");\n      return <LoadingPage />;\n    }\n  };\n  return CheckAuth;\n};\n\nexport default RequireAuth;\n"]},"metadata":{},"sourceType":"module"}