{"ast":null,"code":"var _jsxFileName = \"/Users/omarragab/Documents/Job/ResumeProject1/client/src/utils/requireAuth.js\";\nimport React, { useEffect } from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport getCurrentUser from \"../GQL/queries/CurrentUser\";\nimport LoginPage from \"../_pages/LoginPage/LoginPage\"; // import history from \"./history\";\n\nimport { Link, useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RequireAuth = WrappedComponent => {\n  var _s = $RefreshSig$();\n\n  const CheckAuth = props => {\n    _s();\n\n    const {\n      pathname\n    } = useLocation();\n    const {\n      loading,\n      error,\n      data\n    } = useQuery(getCurrentUser);\n    useEffect(() => {\n      if (!loading && !data.user2) {\n        props.history.push(\"/login\");\n      }\n    }, [data]);\n\n    if (data === null || data === void 0 ? void 0 : data.user2) {\n      props.history.push(pathname);\n      return /*#__PURE__*/_jsxDEV(WrappedComponent, { ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 14\n      }, this);\n    } else {\n      // props.history.push(\"/login\");\n      return /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  _s(CheckAuth, \"jQ4psoal5lWzVJeuIeBH+ndjfZE=\", false, function () {\n    return [useLocation, useQuery];\n  });\n\n  return CheckAuth;\n};\n\n_c = RequireAuth;\nexport default RequireAuth;\n\nvar _c;\n\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"sources":["/Users/omarragab/Documents/Job/ResumeProject1/client/src/utils/requireAuth.js"],"names":["React","useEffect","useQuery","getCurrentUser","LoginPage","Link","useLocation","RequireAuth","WrappedComponent","CheckAuth","props","pathname","loading","error","data","user2","history","push"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,SAAP,MAAsB,+BAAtB,C,CACA;;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;;;AAEA,MAAMC,WAAW,GAAIC,gBAAD,IAAsB;AAAA;;AACxC,QAAMC,SAAS,GAAIC,KAAD,IAAW;AAAA;;AAC3B,UAAM;AAAEC,MAAAA;AAAF,QAAeL,WAAW,EAAhC;AACA,UAAM;AAAEM,MAAAA,OAAF;AAAWC,MAAAA,KAAX;AAAkBC,MAAAA;AAAlB,QAA2BZ,QAAQ,CAACC,cAAD,CAAzC;AAEAF,IAAAA,SAAS,CAAC,MAAM;AACd,UAAI,CAACW,OAAD,IAAY,CAACE,IAAI,CAACC,KAAtB,EAA6B;AAC3BL,QAAAA,KAAK,CAACM,OAAN,CAAcC,IAAd,CAAmB,QAAnB;AACD;AACF,KAJQ,EAIN,CAACH,IAAD,CAJM,CAAT;;AAMA,QAAIA,IAAJ,aAAIA,IAAJ,uBAAIA,IAAI,CAAEC,KAAV,EAAiB;AACfL,MAAAA,KAAK,CAACM,OAAN,CAAcC,IAAd,CAAmBN,QAAnB;AACA,0BAAO,QAAC,gBAAD,OAAsBD;AAAtB;AAAA;AAAA;AAAA;AAAA,cAAP;AACD,KAHD,MAGO;AACL;AACA,0BAAO,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;AACF,GAjBD;;AADwC,KAClCD,SADkC;AAAA,YAEjBH,WAFiB,EAGLJ,QAHK;AAAA;;AAmBxC,SAAOO,SAAP;AACD,CApBD;;KAAMF,W;AAsBN,eAAeA,WAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport getCurrentUser from \"../GQL/queries/CurrentUser\";\nimport LoginPage from \"../_pages/LoginPage/LoginPage\";\n// import history from \"./history\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nconst RequireAuth = (WrappedComponent) => {\n  const CheckAuth = (props) => {\n    const { pathname } = useLocation();\n    const { loading, error, data } = useQuery(getCurrentUser);\n\n    useEffect(() => {\n      if (!loading && !data.user2) {\n        props.history.push(\"/login\");\n      }\n    }, [data]);\n\n    if (data?.user2) {\n      props.history.push(pathname);\n      return <WrappedComponent {...props} />;\n    } else {\n      // props.history.push(\"/login\");\n      return <LoginPage />;\n    }\n  };\n  return CheckAuth;\n};\n\nexport default RequireAuth;\n"]},"metadata":{},"sourceType":"module"}