{"ast":null,"code":"import _slicedToArray from\"/Users/omarragab/Documents/test/launchFeb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import styles from\"./Post.module.css\";import React,{useState,useEffect}from\"react\";import{useMutation,useQuery,useLazyQuery}from\"@apollo/client\";import{useAppSelector,useAppDispatch}from\"../../../../redux/hooks\";import MakeComment from\"../MakeComment/MakeComment\";import editUserMutation from\"../../../../GQL/mutations/editUser\";import Comment from\"../Comment/Comment\";import currentUserQuery from\"../../../../GQL/queries/CurrentUser\";import deletePostMutation from\"../../../../GQL/mutations/deletePost\";import editPostMutation from\"../../../../GQL/mutations/editPost\";import CommentList from\"../CommentList/CommentList\";import EditDeletePost from\"../EditDeletePost/EditDeletePost\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(_ref){var postId=_ref.postId,name=_ref.name,profilePic=_ref.profilePic,likeCount=_ref.likeCount,likeList=_ref.likeList,commentCount=_ref.commentCount,commentList=_ref.commentList,postContent=_ref.postContent,date=_ref.date;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),commentOpen=_useState2[0],setCommentOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),commentListOpen=_useState4[0],setCommentListOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editDeleteOpen=_useState6[0],setEditDeleteOpen=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),userPostIds=_useState8[0],setUserPostIds=_useState8[1];var currentUser=useAppSelector(function(state){return state.currentUser;});var _useMutation=useMutation(deletePostMutation),_useMutation2=_slicedToArray(_useMutation,1),deletePost=_useMutation2[0];var _useMutation3=useMutation(editUserMutation),_useMutation4=_slicedToArray(_useMutation3,1),editUser=_useMutation4[0];var _useMutation5=useMutation(editPostMutation),_useMutation6=_slicedToArray(_useMutation5,1),editPost=_useMutation6[0];useEffect(function(){if(currentUser){var postIds=currentUser.posts.map(function(post){return post.id;});setUserPostIds(postIds);}},[currentUser]);var onLikeClick=function onLikeClick(){var listOfLikeIds=likeList.map(function(likeId){return likeId.id;});console.log(listOfLikeIds);if(listOfLikeIds.includes(currentUser.id)){editPost({variables:{id:postId,deleteLike:currentUser.id},refetchQueries:[{query:currentUserQuery}],awaitRefetchQueries:true});}else{editPost({variables:{id:postId,addLike:currentUser.id},refetchQueries:[{query:currentUserQuery}],awaitRefetchQueries:true});}};var onEditClick=function onEditClick(){deletePost({variables:{id:currentUser.id},refetchQueries:[{query:currentUserQuery}],awaitRefetchQueries:true}).then(function(res){return editUser({variables:{id:currentUser.id,deletePost:res.data.addPost.id},refetchQueries:[{query:currentUserQuery}],awaitRefetchQueries:true}).catch(function(err){var _err$graphQLErrors;var errors=(_err$graphQLErrors=err.graphQLErrors)===null||_err$graphQLErrors===void 0?void 0:_err$graphQLErrors.map(function(error){return error.message;});console.log(errors);});}).catch(function(err){var _err$graphQLErrors2;var errors=(_err$graphQLErrors2=err.graphQLErrors)===null||_err$graphQLErrors2===void 0?void 0:_err$graphQLErrors2.map(function(error){return error.message;});console.log(errors);});};var onDeleteClick=function onDeleteClick(){deletePost({variables:{id:postId},refetchQueries:[{query:currentUserQuery}],awaitRefetchQueries:true}).then(function(res){return editUser({variables:{id:currentUser.id,deletePost:postId},refetchQueries:[{query:currentUserQuery}],awaitRefetchQueries:true}).catch(function(err){var _err$graphQLErrors3;var errors=(_err$graphQLErrors3=err.graphQLErrors)===null||_err$graphQLErrors3===void 0?void 0:_err$graphQLErrors3.map(function(error){return error.message;});console.log(errors);});}).then(setEditDeleteOpen(!editDeleteOpen)).catch(function(err){var _err$graphQLErrors4;var errors=(_err$graphQLErrors4=err.graphQLErrors)===null||_err$graphQLErrors4===void 0?void 0:_err$graphQLErrors4.map(function(error){return error.message;});console.log(errors);});};return/*#__PURE__*/_jsx(\"div\",{className:styles.individualPost0,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.individualPost,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.name_edit_Container,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:styles.picNameContainer,children:[profilePic?/*#__PURE__*/_jsx(\"img\",{className:styles.profilePic,src:profilePic,alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{className:styles.profilePic,src:\"https://images.unsplash.com/photo-1511367461989-f85a21fda167?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Nnx8cHJvZmlsZXxlbnwwfHwwfHw%3D&w=1000&q=80\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.nameDateContainer,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.name,children:name}),/*#__PURE__*/_jsxs(\"div\",{className:styles.date,children:[(parseInt(date.slice(16,18))+11)%12+1,date.slice(18,21),\"\\xA0\",parseInt(date.slice(16,18))>12?\"PM\":\"AM\",date.slice(24,28),\"\\xA0\",date.slice(0,10),date.slice(10,15)]})]})]})}),userPostIds.includes(postId)?/*#__PURE__*/_jsx(\"div\",{className:styles.editDots,onClick:function onClick(){return setEditDeleteOpen(!editDeleteOpen);},children:/*#__PURE__*/_jsx(EditDeletePost,{postContent:postContent,postId:postId})}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.post_likes_and_commentCount_Container,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.post,children:postContent}),/*#__PURE__*/_jsxs(\"div\",{className:styles.likeCommentCountContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.likeCountContainer,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.likeHandImage,alt:\"\",role:\"presentation\",src:\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 16 16'%3e%3cdefs%3e%3clinearGradient id='a' x1='50%25' x2='50%25' y1='0%25' y2='100%25'%3e%3cstop offset='0%25' stop-color='%2318AFFF'/%3e%3cstop offset='100%25' stop-color='%230062DF'/%3e%3c/linearGradient%3e%3cfilter id='c' width='118.8%25' height='118.8%25' x='-9.4%25' y='-9.4%25' filterUnits='objectBoundingBox'%3e%3cfeGaussianBlur in='SourceAlpha' result='shadowBlurInner1' stdDeviation='1'/%3e%3cfeOffset dy='-1' in='shadowBlurInner1' result='shadowOffsetInner1'/%3e%3cfeComposite in='shadowOffsetInner1' in2='SourceAlpha' k2='-1' k3='1' operator='arithmetic' result='shadowInnerInner1'/%3e%3cfeColorMatrix in='shadowInnerInner1' values='0 0 0 0 0 0 0 0 0 0.299356041 0 0 0 0 0.681187726 0 0 0 0.3495684 0'/%3e%3c/filter%3e%3cpath id='b' d='M8 0a8 8 0 00-8 8 8 8 0 1016 0 8 8 0 00-8-8z'/%3e%3c/defs%3e%3cg fill='none'%3e%3cuse fill='url(%23a)' xlink:href='%23b'/%3e%3cuse fill='black' filter='url(%23c)' xlink:href='%23b'/%3e%3cpath fill='white' d='M12.162 7.338c.176.123.338.245.338.674 0 .43-.229.604-.474.725a.73.73 0 01.089.546c-.077.344-.392.611-.672.69.121.194.159.385.015.62-.185.295-.346.407-1.058.407H7.5c-.988 0-1.5-.546-1.5-1V7.665c0-1.23 1.467-2.275 1.467-3.13L7.361 3.47c-.005-.065.008-.224.058-.27.08-.079.301-.2.635-.2.218 0 .363.041.534.123.581.277.732.978.732 1.542 0 .271-.414 1.083-.47 1.364 0 0 .867-.192 1.879-.199 1.061-.006 1.749.19 1.749.842 0 .261-.219.523-.316.666zM3.6 7h.8a.6.6 0 01.6.6v3.8a.6.6 0 01-.6.6h-.8a.6.6 0 01-.6-.6V7.6a.6.6 0 01.6-.6z'/%3e%3c/g%3e%3c/svg%3e\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.postLikes,children:likeCount})]}),/*#__PURE__*/_jsxs(\"p\",{className:styles.commentCount,onClick:function onClick(){return setCommentListOpen(!commentListOpen);},children:[commentCount,\" Comments\"]})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:styles.hr}),/*#__PURE__*/_jsxs(\"div\",{className:styles.like_comment_btn_container,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.likeBtn,onClick:function onClick(){return onLikeClick();},children:\"Like\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.commentBtn,onClick:function onClick(){return setCommentOpen(!commentOpen);},children:\"Comment\"})]}),/*#__PURE__*/_jsx(\"hr\",{className:styles.hr}),/*#__PURE__*/_jsx(MakeComment,{commentOpen:commentOpen,setCommentOpen:setCommentOpen,postId:postId}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CommentList,{commentList:commentList,commentListOpen:commentListOpen,setCommentListOpen:setCommentListOpen})]})});};export default Post;","map":{"version":3,"sources":["/Users/omarragab/Documents/test/launchFeb/client/src/components/Home/EverythingPosts/Post/Post.js"],"names":["styles","React","useState","useEffect","useMutation","useQuery","useLazyQuery","useAppSelector","useAppDispatch","MakeComment","editUserMutation","Comment","currentUserQuery","deletePostMutation","editPostMutation","CommentList","EditDeletePost","Post","postId","name","profilePic","likeCount","likeList","commentCount","commentList","postContent","date","commentOpen","setCommentOpen","commentListOpen","setCommentListOpen","editDeleteOpen","setEditDeleteOpen","userPostIds","setUserPostIds","currentUser","state","deletePost","editUser","editPost","postIds","posts","map","post","id","onLikeClick","listOfLikeIds","likeId","console","log","includes","variables","deleteLike","refetchQueries","query","awaitRefetchQueries","addLike","onEditClick","then","res","data","addPost","catch","err","errors","graphQLErrors","error","message","onDeleteClick","individualPost0","individualPost","name_edit_Container","picNameContainer","nameDateContainer","parseInt","slice","editDots","post_likes_and_commentCount_Container","likeCommentCountContainer","likeCountContainer","likeHandImage","postLikes","hr","like_comment_btn_container","likeBtn","commentBtn"],"mappings":"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","sourcesContent":["import styles from \"./Post.module.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { useMutation, useQuery, useLazyQuery } from \"@apollo/client\";\nimport { useAppSelector, useAppDispatch } from \"../../../../redux/hooks\";\nimport MakeComment from \"../MakeComment/MakeComment\";\nimport editUserMutation from \"../../../../GQL/mutations/editUser\";\nimport Comment from \"../Comment/Comment\";\nimport currentUserQuery from \"../../../../GQL/queries/CurrentUser\";\nimport deletePostMutation from \"../../../../GQL/mutations/deletePost\";\nimport editPostMutation from \"../../../../GQL/mutations/editPost\";\nimport CommentList from \"../CommentList/CommentList\";\nimport EditDeletePost from \"../EditDeletePost/EditDeletePost\";\n\nconst Post = ({\n  postId,\n  name,\n  profilePic,\n  likeCount,\n  likeList,\n  commentCount,\n  commentList,\n  postContent,\n  date,\n}) => {\n  const [commentOpen, setCommentOpen] = useState(false);\n  const [commentListOpen, setCommentListOpen] = useState(false);\n  const [editDeleteOpen, setEditDeleteOpen] = useState(false);\n  const [userPostIds, setUserPostIds] = useState([]);\n  const currentUser = useAppSelector((state) => state.currentUser);\n  const [deletePost] = useMutation(deletePostMutation);\n  const [editUser] = useMutation(editUserMutation);\n  const [editPost] = useMutation(editPostMutation);\n\n  useEffect(() => {\n    if (currentUser) {\n      const postIds = currentUser.posts.map((post) => {\n        return post.id;\n      });\n      setUserPostIds(postIds);\n    }\n  }, [currentUser]);\n\n  const onLikeClick = () => {\n    const listOfLikeIds = likeList.map((likeId) => {\n      return likeId.id;\n    });\n    console.log(listOfLikeIds);\n    if (listOfLikeIds.includes(currentUser.id)) {\n      editPost({\n        variables: {\n          id: postId,\n          deleteLike: currentUser.id,\n        },\n        refetchQueries: [{ query: currentUserQuery }],\n        awaitRefetchQueries: true,\n      });\n    } else {\n      editPost({\n        variables: {\n          id: postId,\n          addLike: currentUser.id,\n        },\n        refetchQueries: [{ query: currentUserQuery }],\n        awaitRefetchQueries: true,\n      });\n    }\n  };\n\n  const onEditClick = () => {\n    deletePost({\n      variables: {\n        id: currentUser.id,\n      },\n      refetchQueries: [{ query: currentUserQuery }],\n      awaitRefetchQueries: true,\n    })\n      .then((res) =>\n        editUser({\n          variables: {\n            id: currentUser.id,\n            deletePost: res.data.addPost.id,\n          },\n          refetchQueries: [{ query: currentUserQuery }],\n          awaitRefetchQueries: true,\n        }).catch((err) => {\n          const errors = err.graphQLErrors?.map((error) => error.message);\n\n          console.log(errors);\n        })\n      )\n      .catch((err) => {\n        const errors = err.graphQLErrors?.map((error) => error.message);\n        console.log(errors);\n      });\n  };\n\n  const onDeleteClick = () => {\n    deletePost({\n      variables: {\n        id: postId,\n      },\n      refetchQueries: [{ query: currentUserQuery }],\n      awaitRefetchQueries: true,\n    })\n      .then((res) =>\n        editUser({\n          variables: {\n            id: currentUser.id,\n            deletePost: postId,\n          },\n          refetchQueries: [{ query: currentUserQuery }],\n          awaitRefetchQueries: true,\n        }).catch((err) => {\n          const errors = err.graphQLErrors?.map((error) => error.message);\n\n          console.log(errors);\n        })\n      )\n      .then(setEditDeleteOpen(!editDeleteOpen))\n      .catch((err) => {\n        const errors = err.graphQLErrors?.map((error) => error.message);\n        console.log(errors);\n      });\n  };\n\n  return (\n    <div className={styles.individualPost0}>\n      <div className={styles.individualPost}>\n        <div className={styles.name_edit_Container}>\n          <div>\n            <div className={styles.picNameContainer}>\n              {profilePic ? (\n                <img className={styles.profilePic} src={profilePic} alt=\"\" />\n              ) : (\n                <img\n                  className={styles.profilePic}\n                  src=\"https://images.unsplash.com/photo-1511367461989-f85a21fda167?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Nnx8cHJvZmlsZXxlbnwwfHwwfHw%3D&w=1000&q=80\"\n                  alt=\"\"\n                />\n              )}\n\n              <div className={styles.nameDateContainer}>\n                <h3 className={styles.name}>{name}</h3>\n                <div className={styles.date}>\n                  {((parseInt(date.slice(16, 18)) + 11) % 12) + 1}\n                  {date.slice(18, 21)}\n                  &nbsp;\n                  {parseInt(date.slice(16, 18)) > 12 ? \"PM\" : \"AM\"}\n                  {date.slice(24, 28)}\n                  &nbsp;\n                  {date.slice(0, 10)}\n                  {date.slice(10, 15)}\n                </div>\n              </div>\n            </div>\n          </div>\n          {userPostIds.includes(postId) ? (\n            <div\n              className={styles.editDots}\n              onClick={() => setEditDeleteOpen(!editDeleteOpen)}\n            >\n              {/* ... */}\n              <EditDeletePost postContent={postContent} postId={postId} />\n            </div>\n          ) : null}\n        </div>\n        <div className={styles.post_likes_and_commentCount_Container}>\n          <h2 className={styles.post}>{postContent}</h2>\n          <div className={styles.likeCommentCountContainer}>\n            <div className={styles.likeCountContainer}>\n              <img\n                className={styles.likeHandImage}\n                alt=\"\"\n                role=\"presentation\"\n                src=\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 16 16'%3e%3cdefs%3e%3clinearGradient id='a' x1='50%25' x2='50%25' y1='0%25' y2='100%25'%3e%3cstop offset='0%25' stop-color='%2318AFFF'/%3e%3cstop offset='100%25' stop-color='%230062DF'/%3e%3c/linearGradient%3e%3cfilter id='c' width='118.8%25' height='118.8%25' x='-9.4%25' y='-9.4%25' filterUnits='objectBoundingBox'%3e%3cfeGaussianBlur in='SourceAlpha' result='shadowBlurInner1' stdDeviation='1'/%3e%3cfeOffset dy='-1' in='shadowBlurInner1' result='shadowOffsetInner1'/%3e%3cfeComposite in='shadowOffsetInner1' in2='SourceAlpha' k2='-1' k3='1' operator='arithmetic' result='shadowInnerInner1'/%3e%3cfeColorMatrix in='shadowInnerInner1' values='0 0 0 0 0 0 0 0 0 0.299356041 0 0 0 0 0.681187726 0 0 0 0.3495684 0'/%3e%3c/filter%3e%3cpath id='b' d='M8 0a8 8 0 00-8 8 8 8 0 1016 0 8 8 0 00-8-8z'/%3e%3c/defs%3e%3cg fill='none'%3e%3cuse fill='url(%23a)' xlink:href='%23b'/%3e%3cuse fill='black' filter='url(%23c)' xlink:href='%23b'/%3e%3cpath fill='white' d='M12.162 7.338c.176.123.338.245.338.674 0 .43-.229.604-.474.725a.73.73 0 01.089.546c-.077.344-.392.611-.672.69.121.194.159.385.015.62-.185.295-.346.407-1.058.407H7.5c-.988 0-1.5-.546-1.5-1V7.665c0-1.23 1.467-2.275 1.467-3.13L7.361 3.47c-.005-.065.008-.224.058-.27.08-.079.301-.2.635-.2.218 0 .363.041.534.123.581.277.732.978.732 1.542 0 .271-.414 1.083-.47 1.364 0 0 .867-.192 1.879-.199 1.061-.006 1.749.19 1.749.842 0 .261-.219.523-.316.666zM3.6 7h.8a.6.6 0 01.6.6v3.8a.6.6 0 01-.6.6h-.8a.6.6 0 01-.6-.6V7.6a.6.6 0 01.6-.6z'/%3e%3c/g%3e%3c/svg%3e\"\n              />\n              <p className={styles.postLikes}>{likeCount}</p>\n            </div>\n\n            <p\n              className={styles.commentCount}\n              onClick={() => setCommentListOpen(!commentListOpen)}\n            >\n              {commentCount} Comments\n            </p>\n          </div>\n        </div>\n        <hr className={styles.hr} />\n        <div className={styles.like_comment_btn_container}>\n          <div className={styles.likeBtn} onClick={() => onLikeClick()}>\n            Like\n          </div>\n          <div\n            className={styles.commentBtn}\n            onClick={() => setCommentOpen(!commentOpen)}\n          >\n            Comment\n          </div>\n        </div>\n        <hr className={styles.hr} />\n        <MakeComment\n          commentOpen={commentOpen}\n          setCommentOpen={setCommentOpen}\n          postId={postId}\n        />\n        <br />\n        <CommentList\n          commentList={commentList}\n          commentListOpen={commentListOpen}\n          setCommentListOpen={setCommentListOpen}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}