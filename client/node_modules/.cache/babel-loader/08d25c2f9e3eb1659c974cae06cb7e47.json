{"ast":null,"code":"import _slicedToArray from\"/Users/omarragab/Documents/Job/ResumeProject1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import styles from\"./LogInForm.module.css\";import React,{useState,useEffect}from\"react\";import{useMutation}from\"@apollo/client\";import loginMutation from\"../../../GQL/mutations/Login\";import CurrentUserQuery from\"../../../GQL/queries/CurrentUser\";import history from\"../../../utils/history\";import{Modal}from\"./modal/modal\";import LoadingSpinner from\"../../LoadingSpinner/LoadingSpinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogInForm=function LogInForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useMutation=useMutation(loginMutation),_useMutation2=_slicedToArray(_useMutation,1),login=_useMutation2[0];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showModal=_useState8[0],setShowModal=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];/* -------------------------------------------------------------------------- */ /* -------------------------------------------------------------------------- */var onSubmit=function onSubmit(e){e.preventDefault();setLoading(true);login({variables:{email:email,password:password},refetchQueries:[{query:CurrentUserQuery}],awaitRefetchQueries:true}).then(function(e){return[e?history.push(\"/home\"):null,setLoading(false)];}).then(function(res){return[setEmail(\"\"),setPassword(\"\")];}).catch(function(err){var _err$graphQLErrors;var errors=(_err$graphQLErrors=err.graphQLErrors)===null||_err$graphQLErrors===void 0?void 0:_err$graphQLErrors.map(function(error){return error.message;});setErrors(errors);console.log(errors);});};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(Modal,{showModal:showModal,setShowModal:setShowModal},\"2\"),/*#__PURE__*/_jsxs(\"div\",{className:styles.formContainer,children:[loading?/*#__PURE__*/_jsx(\"div\",{className:styles.LoadingSpinner,children:/*#__PURE__*/_jsx(LoadingSpinner,{})}):null,/*#__PURE__*/_jsxs(\"form\",{action:\"\",className:styles.form,onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",type:\"text\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:styles.btnContainer,children:/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(styles.button,\" \").concat(styles.login),children:\"Log In\"})}),/*#__PURE__*/_jsx(\"hr\",{className:styles.horizontalLine})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.btnContainer,children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setShowModal(!showModal);},className:\"\".concat(styles.button,\" \").concat(styles.createNewAccount),children:\"Create new account\"})})]})]});};export default LogInForm;","map":{"version":3,"sources":["/Users/omarragab/Documents/Job/ResumeProject1/client/src/components/Landing/LogInForm/LogInForm.js"],"names":["styles","React","useState","useEffect","useMutation","loginMutation","CurrentUserQuery","history","Modal","LoadingSpinner","LogInForm","email","setEmail","password","setPassword","errors","setErrors","login","showModal","setShowModal","loading","setLoading","onSubmit","e","preventDefault","variables","refetchQueries","query","awaitRefetchQueries","then","push","res","catch","err","graphQLErrors","map","error","message","console","log","container","formContainer","form","target","value","btnContainer","button","horizontalLine","createNewAccount"],"mappings":"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","sourcesContent":["import styles from \"./LogInForm.module.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport loginMutation from \"../../../GQL/mutations/Login\";\nimport CurrentUserQuery from \"../../../GQL/queries/CurrentUser\";\nimport history from \"../../../utils/history\";\nimport { Modal } from \"./modal/modal\";\nimport LoadingSpinner from \"../../LoadingSpinner/LoadingSpinner\";\n\nconst LogInForm = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errors, setErrors] = useState([]);\n  const [login] = useMutation(loginMutation);\n  const [showModal, setShowModal] = useState(false);\n  const [loading, setLoading] = useState(false);\n  /* -------------------------------------------------------------------------- */\n\n  /* -------------------------------------------------------------------------- */\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    login({\n      variables: { email: email, password: password },\n      refetchQueries: [{ query: CurrentUserQuery }],\n      awaitRefetchQueries: true,\n    })\n      .then((e) => [e ? history.push(\"/home\") : null, setLoading(false)])\n      .then((res) => [setEmail(\"\"), setPassword(\"\")])\n      .catch((err) => {\n        const errors = err.graphQLErrors?.map((error) => error.message);\n        setErrors(errors);\n        console.log(errors);\n      });\n  };\n\n  return (\n    <div className={styles.container}>\n      <Modal showModal={showModal} setShowModal={setShowModal} key={\"2\"} />\n      <div className={styles.formContainer}>\n        {loading ? (\n          <div className={styles.LoadingSpinner}>\n            <LoadingSpinner />\n          </div>\n        ) : null}\n\n        <form action=\"\" className={styles.form} onSubmit={onSubmit}>\n          <input\n            placeholder=\"Email\"\n            type=\"text\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n\n          <input\n            placeholder=\"Password\"\n            type=\"text\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <div className={styles.btnContainer}>\n            <button className={`${styles.button} ${styles.login}`}>\n              Log In\n            </button>\n          </div>\n\n          <hr className={styles.horizontalLine} />\n        </form>\n\n        <div className={styles.btnContainer}>\n          <button\n            onClick={() => setShowModal(!showModal)}\n            className={`${styles.button} ${styles.createNewAccount}`}\n          >\n            Create new account\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LogInForm;\n"]},"metadata":{},"sourceType":"module"}