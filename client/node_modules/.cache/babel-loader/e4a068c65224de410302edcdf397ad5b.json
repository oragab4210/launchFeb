{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport CachePersistor from './CachePersistor';\nimport Persistor from './Persistor';\nimport Storage from './Storage';\nexport var persistCacheSync = function persistCacheSync(options) {\n  var cachePersistor = new SynchronousCachePersistor(options);\n  cachePersistor.restoreSync();\n};\n\nvar SynchronousCachePersistor = function (_super) {\n  __extends(SynchronousCachePersistor, _super);\n\n  function SynchronousCachePersistor(options) {\n    var _this = _super.call(this, options) || this;\n\n    _this.storage = new SynchronousStorage(options);\n    _this.persistor = new SynchronousPersistor({\n      log: _this.log,\n      cache: _this.cache,\n      storage: _this.storage\n    }, options);\n    return _this;\n  }\n\n  SynchronousCachePersistor.prototype.restoreSync = function () {\n    this.persistor.restoreSync();\n  };\n\n  return SynchronousCachePersistor;\n}(CachePersistor);\n\nexport { SynchronousCachePersistor };\n\nvar SynchronousPersistor = function (_super) {\n  __extends(SynchronousPersistor, _super);\n\n  function SynchronousPersistor(_a, options) {\n    var log = _a.log,\n        cache = _a.cache,\n        storage = _a.storage;\n    return _super.call(this, {\n      log: log,\n      cache: cache,\n      storage: storage\n    }, options) || this;\n  }\n\n  SynchronousPersistor.prototype.restoreSync = function () {\n    this.cache.restore(this.storage.readSync());\n  };\n\n  return SynchronousPersistor;\n}(Persistor);\n\nexport { SynchronousPersistor };\n\nvar SynchronousStorage = function (_super) {\n  __extends(SynchronousStorage, _super);\n\n  function SynchronousStorage(options) {\n    return _super.call(this, options) || this;\n  }\n\n  SynchronousStorage.prototype.readSync = function () {\n    return this.storage.getItem(this.key);\n  };\n\n  return SynchronousStorage;\n}(Storage);\n\nexport { SynchronousStorage };","map":{"version":3,"sources":["../src/persistCacheSync.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACA,OAAO,cAAP,MAA2B,kBAA3B;AACA,OAAO,SAAP,MAA2C,aAA3C;AACA,OAAO,OAAP,MAAoB,WAApB;AAQA,OAAO,IAAM,gBAAgB,GAAG,SAAnB,gBAAmB,CAAI,OAAJ,EAAoC;AAClE,MAAM,cAAc,GAAG,IAAI,yBAAJ,CAA8B,OAA9B,CAAvB;AACA,EAAA,cAAc,CAAC,WAAf;AACD,CAHM;;AAQP,IAAA,yBAAA,GAAA,UAAA,MAAA,EAAA;AAAkD,EAAA,SAAA,CAAA,yBAAA,EAAA,MAAA,CAAA;;AAGhD,WAAA,yBAAA,CAAY,OAAZ,EAA4C;AAA5C,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,OAAN,KAAc,IADhB;;AAGE,IAAA,KAAI,CAAC,OAAL,GAAe,IAAI,kBAAJ,CAAuB,OAAvB,CAAf;AACA,IAAA,KAAI,CAAC,SAAL,GAAiB,IAAI,oBAAJ,CACf;AAAE,MAAA,GAAG,EAAE,KAAI,CAAC,GAAZ;AAAiB,MAAA,KAAK,EAAE,KAAI,CAAC,KAA7B;AAAoC,MAAA,OAAO,EAAE,KAAI,CAAC;AAAlD,KADe,EAEf,OAFe,CAAjB;;AAID;;AAED,EAAA,yBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACE,SAAK,SAAL,CAAe,WAAf;AACD,GAFD;;AAGF,SAAA,yBAAA;AAAC,CAhBD,CAAkD,cAAlD,CAAA;;;;AAkBA,IAAA,oBAAA,GAAA,UAAA,MAAA,EAAA;AAA6C,EAAA,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;;AAG3C,WAAA,oBAAA,CACE,EADF,EAEE,OAFF,EAEkC;QAD9B,GAAG,GAAA,EAAA,CAAA,G;QAAE,KAAK,GAAA,EAAA,CAAA,K;QAAE,OAAO,GAAA,EAAA,CAAA,O;WAGrB,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM;AAAE,MAAA,GAAG,EAAA,GAAL;AAAO,MAAA,KAAK,EAAA,KAAZ;AAAc,MAAA,OAAO,EAAA;AAArB,KAAN,EAA+B,OAA/B,KAAuC,I;AACxC;;AAED,EAAA,oBAAA,CAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACE,SAAK,KAAL,CAAW,OAAX,CAAmB,KAAK,OAAL,CAAa,QAAb,EAAnB;AACD,GAFD;;AAGF,SAAA,oBAAA;AAAC,CAbD,CAA6C,SAA7C,CAAA;;;;AAeA,IAAA,kBAAA,GAAA,UAAA,MAAA,EAAA;AAA2C,EAAA,SAAA,CAAA,kBAAA,EAAA,MAAA,CAAA;;AACzC,WAAA,kBAAA,CAAY,OAAZ,EAA4C;WAC1C,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,OAAN,KAAc,I;AACf;;AAED,EAAA,kBAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACE,WAAO,KAAK,OAAL,CAAa,OAAb,CAAqB,KAAK,GAA1B,CAAP;AACD,GAFD;;AAGF,SAAA,kBAAA;AAAC,CARD,CAA2C,OAA3C,CAAA","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport CachePersistor from './CachePersistor';\nimport Persistor from './Persistor';\nimport Storage from './Storage';\nexport var persistCacheSync = function (options) {\n    var cachePersistor = new SynchronousCachePersistor(options);\n    cachePersistor.restoreSync();\n};\nvar SynchronousCachePersistor = (function (_super) {\n    __extends(SynchronousCachePersistor, _super);\n    function SynchronousCachePersistor(options) {\n        var _this = _super.call(this, options) || this;\n        _this.storage = new SynchronousStorage(options);\n        _this.persistor = new SynchronousPersistor({ log: _this.log, cache: _this.cache, storage: _this.storage }, options);\n        return _this;\n    }\n    SynchronousCachePersistor.prototype.restoreSync = function () {\n        this.persistor.restoreSync();\n    };\n    return SynchronousCachePersistor;\n}(CachePersistor));\nexport { SynchronousCachePersistor };\nvar SynchronousPersistor = (function (_super) {\n    __extends(SynchronousPersistor, _super);\n    function SynchronousPersistor(_a, options) {\n        var log = _a.log, cache = _a.cache, storage = _a.storage;\n        return _super.call(this, { log: log, cache: cache, storage: storage }, options) || this;\n    }\n    SynchronousPersistor.prototype.restoreSync = function () {\n        this.cache.restore(this.storage.readSync());\n    };\n    return SynchronousPersistor;\n}(Persistor));\nexport { SynchronousPersistor };\nvar SynchronousStorage = (function (_super) {\n    __extends(SynchronousStorage, _super);\n    function SynchronousStorage(options) {\n        return _super.call(this, options) || this;\n    }\n    SynchronousStorage.prototype.readSync = function () {\n        return this.storage.getItem(this.key);\n    };\n    return SynchronousStorage;\n}(Storage));\nexport { SynchronousStorage };\n//# sourceMappingURL=persistCacheSync.js.map"]},"metadata":{},"sourceType":"module"}